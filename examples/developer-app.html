<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>COBI.Bike Developer App</title>

  <!-- Sets initial viewport load and disables zooming  -->
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">

  <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <!-- Include the compiled COBI.Bike CSS -->
  <link href="https://cdn.cobi.bike/devkit/v1.0.0/css/cobi-style.css" rel="stylesheet">
  <!-- Include the your compiled styles when you want to adjust styles to your needs -->
  <link href="https://cdn.cobi.bike/devkit/v1.0.0/css/adjust.css" rel="stylesheet">

  <!-- Include the compiled COBI.Bike JS -->
  <script src="https://cdn.cobi.bike/devkit/v1.0.0/js/cobi-style.js"></script>

</head>

<body>
  <div class="content blue">
    <img class="content-bg" src="https://cdn.cobi.bike/devkit/v1.0.0/resources/images/bottom_bg.svg" alt="">

    <div class="content-padded">
      <h3 class="text-center">Enter URL of your WebApp:</h3>
    </div>

    <div class="input-transparent">
      <input id="url" type="url" placeholder="https://example.com">
    </div>

    <button id="url-button" class="btn" target="_blank">Open WebApp</button>
  </div>
</body>

<script>
  var regex = /^http(s)?:\/\/(www)?\w+(\.\w+)+(\/\w+)*$/;

  if (localStorage.getItem("url") != null) {
    document.getElementById("url").value = localStorage.getItem("url");
    document.getElementById("url-button").disabled = false;
  }
  else {
    document.getElementById("url").value = "";
    document.getElementById("url-button").disabled = true;
  }

  var url = document.getElementById("url");
  url.addEventListener("input", function(event) {
    console.log("url changed", url.value);
    if (url.value.match(regex)) {
      document.getElementById("url-button").disabled = false;

    } else {
      document.getElementById("url-button").disabled = true;
    }
  })
  document.getElementById("url-button").onclick = function() {
    window.location = url.value;
    localStorage.setItem("url", url.value );
    document.getElementById("url-button").style.display = "none";
  }
</script>

</html>
